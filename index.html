<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ë¼ìŠ¤íŠ¸ ì›Œ VS ë§ˆìŠ¤í„°</title>
    
    <script type="importmap">
      {
        "imports": {
            "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js?module",
            "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js?module",
            "firebase/auth": "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js?module"
        }
      }
    </script>
    
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/features.css">
</head>
<body class="dark-theme">
    <div class="header-bar">
        <div class="logo">ALLIANCE MASTER</div>
        <div class="header-actions">
            <button data-action="toggleDarkMode" class="icon-text-btn" aria-label="í…Œë§ˆ ë³€ê²½">
                <span class="icon" aria-hidden="true">âœ¨</span><span class="label">í…Œë§ˆ</span>
            </button>
            <div id="auto-save-status" class="icon-text-btn" aria-label="ë™ê¸°í™” ìƒíƒœ">
                <span class="icon" aria-hidden="true">â˜ï¸</span><span class="label">Sync</span>
            </div>
            <button data-action="showWeeklyReport" class="icon-text-btn" aria-label="ë¦¬í¬íŠ¸ ë³´ê¸°">
                <span class="icon" aria-hidden="true">ğŸ“Š</span><span class="label">ë¦¬í¬íŠ¸</span>
            </button>
            <div class="lang-selector">
                <span id="lang-ko" class="active" data-action="changeLang" data-lang="ko">KO</span> | 
                <span id="lang-en" data-action="changeLang" data-lang="en">EN</span>
            </div>
            <div class="live-counter"><div class="live-dot"></div><span id="user-count">ì—°ê²° ì¤‘...</span></div>
        </div>
    </div>

    <nav class="nav-bar">
        <div id="nav-vs" class="nav-item active" data-action="showPage" data-page="vs" data-i18n="nav.vs">ğŸ“Š VS ëŒ€ê²°</div>
        <div id="nav-growth" class="nav-item" data-action="showPage" data-page="growth" data-i18n="nav.growth">ğŸ“ˆ ì„±ì¥ ê³„ì‚°ê¸°</div>
        <div id="nav-board" class="nav-item" data-action="showPage" data-page="board" data-i18n="nav.board">ğŸ’¡ ì •ë³´ ê³µìœ </div>
    </nav>

    <div class="container">
        <div id="page-vs" class="page-content active">
            <div id="recommend-box"></div>
            
            <div class="card status-card">
                <div class="section-title">ğŸ¯ DAILY GOAL</div>
                <div class="target-selector">
                    <button class="target-btn" id="target-2300000" data-action="setTarget" data-target="2300000">6ìƒ<br><span class="target-medal">ğŸ… 400</span></button>
                    <button class="target-btn" id="target-3600000" data-action="setTarget" data-target="3600000">8ìƒ<br><span class="target-medal">ğŸ… 800</span></button>
                    <button class="target-btn active" id="target-7200000" data-action="setTarget" data-target="7200000">9ìƒ<br><span class="target-medal">ğŸ… 1,200</span></button>
                </div>
            </div>

            <div class="global-menu-grid" style="grid-template-columns: 1fr;">
                <button class="global-menu-btn" data-action="openTechModal">
                    <div class="icon">ğŸ”¬</div>
                    <div class="text-group">
                        <span class="title" id="menu-tech-title">ì—°ë§¹ í…Œí¬ ì„¤ì •</span>
                        <span class="desc" id="menu-tech-desc">ê°œì¸ë³„ í…Œí¬ ë ˆë²¨ ë°˜ì˜</span>
                    </div>
                </button>
            </div>

            <div class="day-tabs" id="day-tabs-container"></div>
            <div id="input-container"></div>
        </div>

        <div id="page-growth" class="page-content">
            <div class="growth-sub-tabs">
                <button id="tab-skill" class="growth-tab-btn active" data-action="showGrowthTab" data-tab="skill">ğŸ… ìŠ¤í‚¬ í›ˆì¥</button>
                <button id="tab-gear" class="growth-tab-btn" data-action="showGrowthTab" data-tab="gear">âš™ï¸ ì¥ë¹„ ê°•í™”</button>
                <button id="tab-valor" class="growth-tab-btn" data-action="showGrowthTab" data-tab="valor">ğŸ”¬ í…Œí¬ ì—°êµ¬</button>
            </div>
            <div id="growth-skill" class="growth-section active"></div>
            <div id="growth-gear" class="growth-section"></div>
            <div id="growth-valor" class="growth-section"></div>
        </div>
        
        <div id="page-board" class="page-content">
            <div class="page-header-actions">
                <button data-action="openWriteModal" class="btn-primary">ğŸ“ ê¸€ì“°ê¸°</button>
            </div>
            <div id="posts-list" class="masonry-grid"></div>
        </div>
    </div>

    <div class="result-bar">
        <div class="result-info">
            <div class="info-group">
                <span class="info-label" id="score-label">TOTAL SCORE</span>
                <span id="score" class="info-val">0</span>
            </div>
            <div class="info-group" style="align-items: center;">
                <span class="info-label">MEDAL</span>
                <span id="medal-status" class="info-val" style="color:var(--warning);">0</span>
            </div>
            <div class="info-group" style="align-items: flex-end;">
                <span class="info-label" id="box-label">BOX REWARD</span>
                <span id="box-status" class="info-val">0 / 9</span>
            </div>
        </div>
        <div class="progress-section">
            <div class="progress-container">
                <div id="bar" class="progress-fill"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                <span id="diff" class="remaining-text" style="color:var(--text-muted); font-size: 0.85rem; font-weight: 700;">ë‚¨ì€ ì ìˆ˜: 7,200,000</span>
                <span id="pct-text" style="font-weight: 800; color: var(--primary);">0%</span>
            </div>
        </div>
    </div>

    <div id="modal-container">
        <div id="customDialog" class="modal" style="z-index: 6000;">
            <div class="modal-card" style="max-width: 320px; text-align: center; padding: 30px 20px;">
                <h3 id="dialogTitle" style="margin-top:0; font-size:1.2rem; font-weight:800; margin-bottom: 15px;">ì•Œë¦¼</h3>
                <p id="dialogMsg" style="color: var(--text-muted); font-size:0.95rem; margin-bottom: 25px; line-height:1.4; word-break: keep-all;"></p>
                <div style="display: flex; gap: 10px;">
                    <button id="dialogBtnCancel" data-action="closeModal" class="btn-secondary" style="flex:1; display:none;">ì·¨ì†Œ</button>
                    <button id="dialogBtnConfirm" data-action="closeModal" class="btn-primary" style="flex:1;">í™•ì¸</button>
                </div>
            </div>
        </div>

        <div id="customSelectModal" class="modal bottom-sheet-modal" style="z-index: 5500;">
            <div class="bottom-sheet">
                <div class="sheet-header">
                    <h3 id="sheetTitle" style="margin:0; font-size:1.1rem;">ì„ íƒ</h3>
                    <span class="close-x" data-action="closeModal" style="position:static; padding:0;">&times;</span>
                </div>
                <div id="sheetOptions" class="sheet-options"></div>
            </div>
        </div>

        <div id="quickInputModal" class="modal">
            <div class="modal-card" style="max-width: 850px; padding: 25px;">
                <span class="close-x" data-action="closeModal">&times;</span>
                <h3 style="margin-top:0; margin-bottom: 10px; font-weight: 800; display:flex; align-items:center; gap:8px;"><span style="font-size:1.4rem;">âš¡</span> <span id="quick-modal-title">ì¾Œì† ì…ë ¥</span></h3>
                <div style="margin-bottom: 15px;">
                    <label id="quick-bg-btn" for="quick-screenshot" class="btn-secondary" style="display: block; text-align: center; padding: 12px; cursor: pointer; border-radius: 12px; font-size: 0.9rem; border: 2px dashed rgba(0,0,0,0.2);">ğŸ“· ì¸ë²¤í† ë¦¬ ìŠ¤í¬ë¦°ìƒ· ë¶ˆëŸ¬ì˜¤ê¸°</label>
                    <input type="file" id="quick-screenshot" accept="image/*" style="display: none;" data-action="previewQuickScreenshot">
                    <div id="quick-image-preview" style="margin-top: 10px; height: 180px; overflow-y: auto; border-radius: 12px; display: none; border: 1px solid rgba(0,0,0,0.1); background: #000;"><img id="quick-img-tag" style="width: 100%; display: block;"></div>
                </div>
                <div id="quick-input-container" class="quick-input-grid"></div>
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button id="quick-cancel-btn" data-action="closeModal" class="btn-secondary" style="flex:1;">ì·¨ì†Œ</button>
                    <button id="quick-apply-btn" data-action="applyQuickInput" class="btn-primary" style="flex:2;">ì¼ê´„ ì ìš©</button>
                </div>
            </div>
        </div>

        <div id="writeModal" class="modal">
            <div class="modal-card">
                <span class="close-x" data-action="closeModal">&times;</span>
                <h3 style="margin-top:0; margin-bottom: 20px; font-weight: 800;">ê²Œì‹œë¬¼ ì‘ì„±</h3>
                <input type="hidden" id="edit-doc-id">
                <div class="modern-input-wrapper">
                    <input type="text" id="post-title" class="modern-input" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                <div class="modern-input-wrapper">
                    <textarea id="post-content" class="modern-textarea" rows="6" placeholder="ë‚´ìš©ì„ ìì„¸íˆ ì…ë ¥í•´ì£¼ì„¸ìš”..."></textarea>
                </div>
                <div class="modern-file-wrapper">
                    <input type="file" id="post-file" accept="image/*" class="modern-file-input">
                </div>
                <button data-action="sendLivePost" class="btn-primary" style="width:100%; margin-top: 10px;">ë“±ë¡í•˜ê¸°</button>
            </div>
        </div>

        <div id="viewModal" class="modal">
            <div class="modal-card" style="max-height: 90vh; overflow-y: auto;">
                <span class="close-x" data-action="closeModal">&times;</span>
                <div id="view-content" style="margin-bottom: 15px;"></div>
                <img id="view-img" style="max-width: 100%; border-radius: 16px; display: none; margin-bottom: 15px;">
                <div id="delete-area" style="text-align: right; margin-bottom: 15px; display: none;">
                    <a href="#" id="edit-link" data-action="editPost" style="color: var(--primary); font-size: 0.9rem; margin-right: 15px; font-weight:800;">ìˆ˜ì •</a>
                    <a href="#" data-action="deletePostUI" style="color: var(--danger); font-size: 0.9rem; font-weight:800;">ì‚­ì œ</a>
                </div>
                <div style="border-top: 1px solid rgba(0,0,0,0.05); padding-top: 15px;">
                    <h4 style="margin: 0 0 10px 0;">ëŒ“ê¸€</h4>
                    <div id="view-replies" style="max-height: 150px; overflow-y: auto; margin-bottom: 15px; font-size: 0.9rem;"></div>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="view-reply-input" class="modern-input" style="margin: 0; padding: 12px; flex: 1;" placeholder="ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”...">
                        <button data-action="submitReply" class="btn-primary" style="padding: 12px 20px; white-space: nowrap;">ë“±ë¡</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="weeklyModal" class="modal">
            <div class="modal-card">
                <span class="close-x" data-action="closeModal">&times;</span>
                <h3 id="weekly-modal-title" style="margin-top:0">ì´ë²ˆ ì£¼ ëŒ€ê²° ë¦¬í¬íŠ¸ ğŸ“ˆ</h3>
                <div id="weekly-report-content"></div>
                <button id="weekly-close-btn" data-action="closeModal" class="btn-primary" style="width:100%; margin-top:20px;">ë‹«ê¸°</button>
            </div>
        </div>

        <div id="techModal" class="modal">
            <div class="modal-card">
                <span class="close-x" data-action="closeModal">&times;</span>
                <h3 id="tech-modal-title" style="margin-top:0">ì—°ë§¹ í…Œí¬ ì„¤ì •</h3>
                <div class="tech-grid" id="tech-inputs"></div>
                <button id="tech-confirm-btn" data-action="closeModal" class="btn-primary" style="width:100%; margin-top:20px;">ì ìš© ì™„ë£Œ</button>
            </div>
        </div>

        <div id="spdModal" class="modal">
            <div class="modal-card">
                <span class="close-x" data-action="closeModal">&times;</span>
                <h3 id="spd-title" style="margin-top:0; font-size:1.1rem; margin-bottom:20px;">ê°€ì† ê³„ì‚°ê¸°</h3>
                <div class="tech-grid" id="spd-stepper-container"></div>
                <div id="spd-result-text" style="margin: 20px 0; text-align: center; color: var(--primary); font-weight: 800; font-size: 1.15rem; background: var(--primary-soft); padding: 10px; border-radius: 12px;">ì´: 0ì¼ 0ì‹œ 0ë¶„</div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px">
                    <button id="spd-cancel-btn" data-action="closeModal" class="btn-secondary">ì·¨ì†Œ</button>
                    <button id="spd-apply-btn" data-action="applySpd" class="btn-primary">ì ìš©</button>
                </div>
            </div>
        </div>

        <div id="droneModal" class="modal">
            <div class="modal-card">
                <span class="close-x" data-action="closeModal">&times;</span>
                <h3 id="drone-modal-title" style="margin-top:0">ë“œë¡  íŒŒì¸  ìƒì</h3>
                <div class="tech-grid" id="drone-inputs-container"></div>
                <button id="drone-confirm-btn" data-action="closeModal" class="btn-primary" style="width:100%; margin-top:20px;">í™•ì¸</button>
            </div>
        </div>
        <div id="heroModal" class="modal">
            <div class="modal-card">
                <span class="close-x" data-action="closeModal">&times;</span>
                <h3 id="hero-modal-title" style="margin-top:0">ì˜ì›… ì¡°ê° ì…ë ¥</h3>
                <div class="tech-grid" id="hero-inputs-container"></div>
                <button id="hero-confirm-btn" data-action="closeModal" class="btn-primary" style="width:100%; margin-top:20px;">í™•ì¸</button>
            </div>
        </div>

        <div id="lightboxModal" class="modal" style="background: rgba(0,0,0,0.95); z-index: 5000;" data-action="closeLightbox">
            <span class="close-x" style="color: white; top: 20px; right: 20px; font-size: 2.5rem;" data-action="closeLightbox">&times;</span>
            <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                <img id="lightbox-img" style="max-width: 100%; max-height: 100%; object-fit: contain; transition: transform 0.1s ease-out;" />
            </div>
        </div>
    </div>

    <script type="module" src="./js/main.js"></script>
</body>
</html>
