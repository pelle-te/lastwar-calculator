<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>라스트 워 VS 마스터 v8.5</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header-bar">
        <div class="logo">ALLIANCE MASTER</div>
        <div style="display: flex; align-items: center; gap: 15px;">
            <div class="lang-selector" style="font-size: 0.8rem; font-weight: 800; cursor: pointer;">
                <span id="lang-ko" onclick="changeLang('ko')" style="color: var(--primary);">KO</span> | 
                <span id="lang-en" onclick="changeLang('en')" style="color: #94a3b8;">EN</span>
            </div>
            <div class="live-counter">
                <div class="live-dot"></div>
                <span id="user-count">연결 중...</span>
            </div>
        </div>
    </div>

    <nav class="nav-bar">
        <div id="nav-calc" class="nav-item active" onclick="showPage('calc')">📊 계산기</div>
        <div id="nav-board" class="nav-item" onclick="showPage('board')">📱 피드</div>
        <div id="nav-qna" class="nav-item" onclick="showPage('qna')">💬 건의</div>
    </nav>

    <div class="container">
        <div id="page-calc" class="page-content active">
            <div class="card">
                <div class="section-title">🎯 DAILY GOAL</div>
                <div class="target-selector">
                    <button class="target-btn" id="target-2300000" onclick="setTarget(2300000)">6상</button>
                    <button class="target-btn" id="target-3600000" onclick="setTarget(3600000)">8상</button>
                    <button class="target-btn active" id="target-7200000" onclick="setTarget(7200000)">9상</button>
                </div>
            </div>
            <div class="card">
                <div class="section-title">🔬 ALLIANCE TECH</div>
                <div class="tech-grid" id="tech-inputs"></div>
            </div>
            <div class="day-tabs" id="day-tabs-container"></div>
            <div id="input-container"></div>
        </div>

        <div id="page-board" class="page-content">
            <div id="posts-list"></div>
            <div class="admin-link" onclick="enableAdmin()">관리자 삭제 모드</div>
        </div>

        <div id="page-qna" class="page-content">
            <div id="suggestions-list"></div>
        </div>
    </div>

    <div class="result-bar">
        <div class="total-score" id="score">0.0</div>
        <div class="progress-container"><div class="progress-fill" id="bar"></div></div>
        <div id="diff" style="font-size:0.85rem; color:#cbd5e1; font-weight:600;">남은 점수: 7,200,000</div>
    </div>

    <div id="float-btn" class="write-btn" style="display:none;" onclick="openModal()">+</div>
    
    <div id="writeModal" class="modal">
        <div class="modal-card">
            <h3 style="margin-top:0">새 게시물 작성</h3>
            <textarea id="post-text" placeholder="내용을 입력하세요..."></textarea>
            <div style="margin:15px 0"><input type="file" id="post-file" accept="image/*"></div>
            <div style="display:flex; gap:10px">
                <button onclick="closeModal()" class="btn-secondary">취소</button>
                <button onclick="sendLivePost()" class="btn-primary">공유하기</button>
            </div>
        </div>
    </div>

    <div id="spdModal" class="modal">
        <div class="modal-card">
            <h3 id="spd-title" style="margin-top:0">가속 계산기</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0;">
                <div class="tech-item"><label>5분</label><input type="number" id="m5" value="0" min="0" oninput="calcSpdTotal()"></div>
                <div class="tech-item"><label>15분</label><input type="number" id="m15" value="0" min="0" oninput="calcSpdTotal()"></div>
                <div class="tech-item"><label>1시간</label><input type="number" id="h1" value="0" min="0" oninput="calcSpdTotal()"></div>
                <div class="tech-item"><label>3시간</label><input type="number" id="h3" value="0" min="0" oninput="calcSpdTotal()"></div>
                <div class="tech-item" style="grid-column: span 2;"><label>8시간</label><input type="number" id="h8" value="0" min="0" oninput="calcSpdTotal()"></div>
            </div>
            <div id="spd-result-text" style="font-weight: 800; color: var(--primary); margin-bottom: 20px; text-align: center; font-size: 1.1rem;">총: 0일 0시 0분</div>
            <div style="display:flex; gap:10px">
                <button onclick="closeSpdModal()" class="btn-secondary" style="flex:1">취소</button>
                <button onclick="applySpd()" class="btn-primary" style="flex:1; background:var(--primary); color:white; border:none; border-radius:10px; font-weight:800; cursor:pointer;">적용하기</button>
            </div>
        </div>
    </div>

    <script src="calc.js"></script>
    <script src="board.js"></script>
</body>
</html>
